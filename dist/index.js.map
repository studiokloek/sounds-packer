{"version":3,"file":"index.js","sources":["../src/lib/util.js","../src/lib/codegenerator.js","../src/lib/packer.js","../src/lib/settings.js","../src/lib/watcher.js","../src/index.js"],"sourcesContent":["export function makeVariableSafe(value) {\n  if (/^\\d/.test(value)) {\n    value = `s${value}`;\n  }\n\n  return value.replace(/(\\W)/g, '_').replace(/_{2,}/g, '.').replace(/^_/, '').replace(/_$/, '');\n}\n\nexport function kebabCase(value) {\n  return value\n    .replace(/([\\da-z])([A-Z])/g, '$1-$2')\n    .replace(/([A-Z])([A-Z])(?=[a-z])/g, '$1-$2')\n    .toLowerCase();\n}\n","import camelcase from 'camelcase';\nimport fs from 'fs-extra';\nimport get from 'get-value';\nimport path from 'path';\nimport pupa from 'pupa';\nimport set from 'set-value';\nimport uppercamelcase from 'uppercamelcase';\nimport { makeVariableSafe } from './util';\n\nconst loaderInfoTemplate = `export default {\n  assetName : '{assetName}',\n  assets : {assets},\n  numberOfSounds : {numberOfSounds},\n  type: 'sounds'\n};`;\n\nconst assetTemplate = `export const {assetName} = {assetData};`;\n\nfunction convertPathToVariableName(filePath, basePath) {\n  // forceer string\n  filePath = `${filePath}`;\n\n  // basepath er af halen, path splitsen en opschonen\n  let parts = filePath.replace(`${basePath}/`, '').split('/').map((part) => makeVariableSafe(part));\n\n  // haal laatste onderdeel er af\n  let lastPart = parts.pop();\n  lastPart = lastPart.toUpperCase();\n\n  // camelcase andere onderdelen\n  parts = parts.map((part) => camelcase(part));\n\n  // haal titel elementen uit base path\n  let titleParts = basePath.split('/');\n  titleParts = titleParts.slice(titleParts.length - (titleParts.length === 1 ? 1 : 2));\n\n\n  titleParts.push('sounds');\n  titleParts = uppercamelcase(titleParts.join('-'));\n\n  if (parts.length > 0) {\n    filePath = parts.join('.');\n    filePath = filePath.replace(/(\\W^\\.)/g, '').replace(/\\.{2,}/g, '.').replace(/^\\./, '').replace(/\\.$/, '');\n    return [titleParts, filePath, lastPart].join('.');\n  }\n  else {\n    return [titleParts, lastPart].join('.');\n  }\n}\n\nfunction parseAssetData(files, assetPath) {\n  // bepaal base path\n  const basePath = assetPath,\n    parsedData = {};\n\n  for (const file of files || []) {\n\n    const assetInfo = {\n      id: file.hash,\n      duration: file.duration,\n      name: file.name,\n    }\n\n    set(parsedData, convertPathToVariableName(path.join(file.path,file.name), basePath), assetInfo);\n  }\n\n  return parsedData;\n}\n\nfunction getSortedItems(_itemsData) {\n  const itemsSortable = [];\n\n  for (const assetName of Object.keys(_itemsData)) {\n    if (Object.prototype.hasOwnProperty.call(_itemsData, assetName)) {\n      itemsSortable.push([assetName, _itemsData[assetName]]);\n    }\n  }\n\n  itemsSortable.sort((a, b) => {\n    const x = a[0],\n      y = b[0];\n\n    return x < y ? -1 : (x > y ? 1 : 0);\n  });\n\n  const items = {};\n  for (const item of itemsSortable) {\n    items[item[0]] = item[1];\n  }\n\n  return items;\n}\n\nfunction generateContents(parsedAssetData, loaderData) {\n  let contents = '';\n\n  // assets\n  const assets = [];\n  for (const assetName of Object.keys(parsedAssetData)) {\n    const items = getSortedItems(parsedAssetData[assetName]);\n\n    // eslint-disable-next-line unicorn/no-null\n    let itemsContent = JSON.stringify(items, null, 2);\n    itemsContent = itemsContent.replace(/\"([^\"()]+)\":/g, \"$1:\");\n\n    contents = `${contents}${pupa(assetTemplate, {\n      assetName: assetName,\n      assetData: itemsContent\n    })}\\n`;\n\n    assets.push(assetName);\n  }\n\n  // loader\n  contents = `${contents}${pupa(loaderInfoTemplate, {\n    assets: assets,\n    assetName: loaderData.fileName,\n    numberOfSounds: loaderData.numberOfSounds\n  })}\\n`;\n\n  return contents;\n}\n\nfunction getScriptPath(assetPath, scriptDirectory) {\n  const assetParts = assetPath.split('/'),\n    assetName = assetParts.pop();\n\n  if (assetParts.length < 2) {\n    assetParts.push(assetName);\n  }\n\n  assetPath = assetParts.join('/');\n\n  return `${path.join(scriptDirectory, assetPath)}/assets/sounds-${assetName}.ts`;\n}\n\nexport async function generateCode(assetPath, files, settings, itemOptions) {\n  const scriptDirectory = get(itemOptions, 'scriptDirectory', settings.scriptDirectory);\n\n  // parse data to object\n  const parsedAssetData = parseAssetData(files, assetPath),\n    loaderInfo = {\n      fileName: assetPath,\n      numberOfSounds: files.length\n    }\n\n  const contents = generateContents(parsedAssetData, loaderInfo),\n    scriptpath = getScriptPath(assetPath, scriptDirectory);\n\n  await fs.outputFile(scriptpath, contents);\n}\n","import chalk from 'chalk';\nimport fs from 'fs-extra';\nimport { getAudioDurationInSeconds } from 'get-audio-duration';\nimport globby from 'globby';\nimport hasha from 'hasha';\nimport logSymbols from 'log-symbols';\nimport ora from 'ora';\nimport path from 'path';\nimport { generateCode } from './codegenerator';\n\nconst isPacking = {},\n  shouldPackAgain = {};\n\nexport async function packAll(directories, settings) {\n  console.log(logSymbols.info, chalk.blue(`Start packing all items...`));\n\n  // clean directory\n  console.log(logSymbols.info, chalk.blue(`Clearing sounds directory (${settings.targetDirectory})...`));\n  await fs.emptyDir(settings.targetDirectory);\n\n  for (const directory of directories) {\n    await pack(directory, settings);\n  }\n\n  console.log(logSymbols.success, chalk.green(`Done packing all items...`));\n}\n\nexport async function pack(directory, settings) {\n  let itemPath, itemOptions;\n\n  if (Array.isArray(directory)) {\n    itemPath = directory[0];\n    itemOptions = directory[1];\n  } else {\n    itemPath = directory;\n  }\n\n  if (isPacking[itemPath]) {\n    console.log(logSymbols.warning, chalk.yellow(`Allready packing, starting again afterwards...`));\n    shouldPackAgain[itemPath] = true;\n    return;\n  }\n\n  isPacking[itemPath] = true;\n\n  const spinner = ora(`Packing ${itemPath}`).start();\n\n  try {\n    // pack folder & generate code\n    const success = packFolder(itemPath, settings, itemOptions);\n\n    if (!success) {\n      spinner.fail(`Error packing ${itemPath}`);\n\n      return;\n    }\n  } catch (error) {\n    spinner.fail(`Error packing ${itemPath}`);\n    console.error(logSymbols.warning, error.message);\n\n    return;\n  }\n\n  isPacking[itemPath] = false;\n\n  if (shouldPackAgain[itemPath]) {\n    shouldPackAgain[itemPath] = false;\n    spinner.warn(`Needs repacking, something changed while packing...`);\n    await pack(directory, settings);\n  } else {\n    spinner.succeed(`Done packing ${itemPath}`);\n  }\n}\n\nasync function packFolder(itemPath, settings, itemOptions) {\n  const sourceDirectory = path.join(settings.sourceDirectory, itemPath);\n\n  // get all wav's\n  const paths = await globby(`${sourceDirectory}/**/*.wav`),\n    files = [];\n\n  for (const filepath of paths) {\n    // generate hash id\n    let hash = await hasha.fromFile(filepath, { algorithm: 'md5' });\n    hash = hash.slice(0, 10);\n\n    // get duration\n    let duration = await getAudioDurationInSeconds(filepath)\n    duration = Math.round(duration * 10000) / 10000;\n\n    // basepath er af halen\n    const cleanedFilepath = filepath.replace(`${sourceDirectory}/`, '');\n\n    const info = {\n      filename: path.basename(cleanedFilepath, '.wav'),\n      path: cleanedFilepath.replace(`${path.basename(cleanedFilepath)}`, ''),\n      duration,\n      hash,\n    }\n\n    // remove any prefix\n    let cleanedFileName = info.filename;\n    for (const prefix of settings.prefixes) {\n      if (cleanedFileName.startsWith(prefix)) {\n        cleanedFileName = cleanedFileName.slice(prefix.length)\n      }\n    }\n\n    info.name = cleanedFileName;\n\n    files.push(info);\n  }\n\n  const copied = await copyFiles(itemPath, files, settings);\n\n  if (!copied) {\n    return false;\n  }\n\n  await generateCode(itemPath, files, settings, itemOptions);\n\n  return true;\n}\n\nasync function copyFiles(itemPath, files, settings) {\n\n  const sourceDirectory = path.join(settings.sourceDirectory, itemPath);\n\n  for (const file of files) {\n    try {\n      // loop door formats\n      for (const format of settings.formats) {\n        await fs.copy(`${path.join(sourceDirectory, file.path,file.filename)}.${format}`, `${path.join(settings.targetDirectory, file.hash)}.${format}`);\n      }\n    } catch (error) {\n      console.log(error)\n      return false;\n    }\n  }\n\n  return true;\n}\n\n","import ora from 'ora';\nimport fs from 'fs-extra';\nimport get from 'get-value';\nimport defaults from 'object.defaults';\n\nexport async function readSettingsFrom(_file) {\n  const spinner = ora(`Reading settings from ${_file}...`).start();\n\n  let settings = {};\n\n  try {\n    const data = await fs.readJSON(_file);\n\n    settings = get(data, 'sounds', {});\n\n    settings = defaults(settings, {\n      sourceDirectory: './assets/',\n      scriptDirectory: './assets/converted/',\n      targetDirectory: './assets/converted/',\n      watch: false,\n      watchDelay: 500,\n      prefixes: [],\n      formats: ['ogg', 'mp3'],\n      directories: []\n    });\n\n    // sort prefixes\n    settings.prefixes.sort((a, b) => {\n      const x = a,\n        y = b;\n\n      return x < y ? 1 : (x > y ? -1 : 0);\n    });\n\n  } catch (error) {\n    console.log(error);\n    spinner.fail(`Could not load settings from ${_file}... (does it exist?)`);\n\n    return settings;\n  }\n\n  const numberOfDirectories = settings.directories.length;\n\n  if (numberOfDirectories) {\n    spinner.succeed(`Found ${numberOfDirectories} directories to process...`);\n\n  } else {\n    spinner.fail(`Found no directories to process...`);\n  }\n\n  return settings;\n}\n","import chalk from 'chalk';\nimport logSymbols from 'log-symbols';\nimport path from 'path';\nimport sane from 'sane';\nimport { debounce } from 'throttle-debounce';\nimport { pack } from './packer';\n\nexport async function watch(directories, settings) {\n  for (const directory of directories) {\n    await watchDirectory(directory, settings);\n  }\n}\n\nasync function watchDirectory(directory, settings) {\n  return new Promise((_resolver) => {\n\n    let itemPath, itemOptions = {};\n\n    if (Array.isArray(directory)) {\n      itemPath = directory[0];\n      itemOptions = directory[1];\n    } else {\n      itemPath = directory;\n    }\n\n    if ((settings.watch !== true && itemOptions.watch !== true) || itemOptions.watch === false) {\n      _resolver();\n      return;\n    }\n\n    const delayedCallback = debounce(settings.watchDelay, () => {\n      pack(directory, settings);\n    });\n    const watcher = sane(`${path.join(settings.sourceDirectory, itemPath)}`, {\n      glob: ['**/*.png', '**/*.jpg']\n    });\n\n    watcher.on('ready', () => {\n      console.log(logSymbols.info, chalk.blue(`Started watching ${itemPath} with a delay of ${settings.watchDelay / 1000}s`));\n      _resolver()\n    });\n    watcher.on('change', delayedCallback);\n    watcher.on('add', delayedCallback);\n    watcher.on('delete', delayedCallback);\n  });\n}\n","import { packAll } from './lib/packer';\nimport { readSettingsFrom } from './lib/settings';\nimport { watch } from './lib/watcher';\n\nconst AssetFile = 'assets.json';\n\nasync function main(_file) {\n  const settings = await readSettingsFrom(_file),\n    directories = settings.directories;\n\n  delete settings.directories;\n\n  if (!settings || !directories) {\n    return;\n  }\n\n  await packAll(directories, settings);\n\n  await watch(directories, settings);\n}\n\nexport function pack(_file) {\n  main(_file || AssetFile);\n}\n"],"names":["pack"],"mappings":"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"}